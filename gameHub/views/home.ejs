<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200...700&display=swap"
    rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            oswald: ['Oswald', 'sans-serif'], //oswald (title)
            Fira: ['Fira Sans', 'sans-serif'], //oswald (title)
      
          },
        },
      },
    };
  </script>
  
  <title>Home Page</title>
</head>
<body>

  

  

  <% if (role === "admin") { %>
    <h1>Admin Page</h1>
    <p>Welcome, Admin!</p>
    <p>Here is a list of all users:</p>
    <ul id="user-list"></ul>

    <script>
      fetch("/admin/users")
        .then(response => response.json())
        .then(data => {
          const userList = document.getElementById("user-list");
          data.forEach(user => {
            const li = document.createElement("li");
            li.innerText = user.username;
            userList.appendChild(li);
          });
        })
        .catch(error => console.error("Error fetching users:", error));
        
    </script>
  <% } else if (role === "user") { %>
    <!-- <h2>Welcome, regular user!</h2> -->
    
<div class="flex flex-row justify-center pt-5 text-md text-slate-500 space-x-5 ">
  <button class="px-3" onclick="window.location.href='/home'">Home</button>
  <button class="px-3" onclick="window.location.href='/profile'">Profile</button>
  <form class="px-3" action="/logout">
    <input type="submit" value="Logout" />
  </form>

</div>

<div class="px-8 py-2 space-y-4 ">
  <h1 class="text-4xl flex flex-row gap-4 justify-center mx-auto flex-wrap font-bold">
    GameHub
  </h1>
  <div class="p-8  gap-4 justify-center mx-auto flex-wrap border-1 border-solid rounded-xl space-y-1">
    <p class="justify-between font-semibold text-xl ">
      Popular titles
    </p>
    <head>
</head>

  <!-- Display top 10 games -->
<div class="px-8 py-4">
  <h2 class="text-2xl font-bold">Top 10 Popular Games</h2>

  <% if (games && games.length > 0) { %>
    <ul class="space-y-6 pt-4">
      <% games.forEach(game => { %>
        <li class="border p-4 rounded-xl">
          <h3 class="text-xl font-semibold"><%= game.name %></h3>
          <p>Rating: <%= game.rating %></p>
          <% if (game.background_image) { %>
            <img src="<%= game.background_image %>" alt="<%= game.name %>" width="300" />
          <% } %>
        </li>
      <% }) %>
    </ul>
  <% } else { %>
    <p>No games available.</p>
  <% } %>


    <p class="justify-between text-slate-400 text-sm pb-4">
      See what people are playing!
    </p>
    <button
      class="bg-slate-700 px-4 py-2 rounded-xl text-white hover:bg-slate-500 transition hover:scale-[1.01] ease-in-out" onclick="window.location.href='/gameDescription'">Explore</button>
  </div>
</div>
<div class="flex-col space-y-8 flex flex-col  justify-center mx-auto px-8 ">
  <div class="py-4">
<p>Hi <%= username %>,<br />Welcome to the home page!</p>
<p>Role: <%= role %>
</p>
  </div>
  <button
    class="text-lg bg-slate-500 px-3 py-6 rounded-xl text-white hover:bg-slate-400 transition hover:scale-[1.01] ease-in-out"
    onclick="window.location.href='/yourActiveLobby'">Your Active Lobby</button>


  <button
    class="text-lg bg-slate-600 px-3 py-6 rounded-xl text-white hover:bg-slate-500 transition hover:scale-[1.01] ease-in-out"
    onclick="window.location.href='/searchGames'">Search a Game</button>
  <button
    class="text-lg bg-slate-700 px-3 py-6 rounded-xl text-white hover:bg-slate-500 transition hover:scale-[1.01] ease-in-out"
    onclick="window.location.href='/viewLobbies'">View others lobbies</button>
</div>

  <% } %>

</div>


</body>
</html>
 